<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/css/buttons.css">
    <link rel="stylesheet" href="/js/iview/dist/styles/iview.css">
    <script src="/js/vue.js"></script>
    <script src="/js/iview/dist/iview.js"></script>
    <script src="/js/axios.js"></script>
    <script src="/js/jquery-3.3.1.js"></script>
    <script src="/js/permissionShow.js"></script>
    <style>
        html body{
            width: 100%;
            height: auto;
            background: rgb(2,0,36);
            background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(235,170,217,0.9699230033810399) 0%, rgba(0,212,255,1) 100%);
        }
        .showStudentInfoFlex{
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .showStudentInfoFlex div{
            border: 1px solid #1B9AF7;
        }
        .showStudentInfoFlex div{
            margin-left: 10px;
        }
        .show-student-button button{
            margin-top: 3px;
        }
    </style>
</head>
<body>
<div id="app">
    <div>
        <row permissionerequier="student:queryStudent"  type="flex" justify="space-between" align="middle">
            <i-col :span="20">
                <i-form label-position="right"  inline>
                    <form-item label="姓名:">
                        <i-input v-model="studentQueryConditions.name" placeholder="请输入要查询的学生名称"></i-input>
                    </form-item>
                    <form-item label="手机号:">
                        <i-input v-model="studentQueryConditions.phone" placeholder="请输入要查询的手机号"></i-input>
                    </form-item>
                    <form-item permissionerequier="asker:queryAskersAll" label="所属咨询师" v-if="isAskerSelect">
                        <i-select v-model="studentQueryConditions.askerId" placeholder="请选择要查询的咨询师">
                            <i-option v-for="(option, index) in askersAll" v-model="option.value" :key="index">
                                {{option.label}}
                            </i-option>
                        </i-select>
                    </form-item>
                    <form-item label="qq:">
                        <i-input v-model="studentQueryConditions.qq" placeholder="请输入要查询的qq"></i-input>
                    </form-item>
                    <form-item>
                        <i-button type="text" style="color: #e9451f;text-decoration:underline" @click="studentQueryConditions.topSerch=!studentQueryConditions.topSerch">高级搜索</i-button>
                    </form-item>
                </i-form>
            </i-col>
            <i-col :span="2">
                <i-button type="success" long @click="queryStudentPagingSearch">搜索</i-button>
            </i-col>
            <i-col :span="2">
                <i-button icon="loop" type="info" @click="reloadHTML">刷新</i-button>
            </i-col>
        </row>
        <row permissionerequier="student:queryStudent" v-show="studentQueryConditions.topSerch" type="flex" justify="center" align="middle">
            <i-col :span="6">
                <span>学生创建起止时间:</span>
                <date-picker v-model="studentQueryConditions.CreateBeginAndEnd" split-panels type="datetimerange" format="yyyy-MM-dd HH:mm"
                             placeholder="创建时间的起止"></date-picker>
            </i-col>
            <i-col :span="6">
                <span>学生上门起止时间:</span>
                <date-picker v-model="studentQueryConditions.homeBeginAndEnd" split-panels type="datetimerange" format="yyyy-MM-dd HH:mm"
                             placeholder="上门时间的起止"></date-picker>
            </i-col>
            <i-col :span="6">
                <span>学生回访起止时间:</span>
                <date-picker v-model="studentQueryConditions.returnVistBeginAndEnd" split-panels type="datetimerange" format="yyyy-MM-dd HH:mm"
                             placeholder="首次回访时间的起止"></date-picker>
            </i-col>
            <i-col :span="6">
                <span>缴费起止时间:</span>
                <date-picker v-model="studentQueryConditions.payStartBeginAndEnd" split-panels type="datetimerange" format="yyyy-MM-dd HH:mm"
                             placeholder="缴费时间的起止"></date-picker>
            </i-col>
        </row>
        <row permissionerequier="student:queryStudent" style="margin-top: 20px;" v-show="studentQueryConditions.topSerch" type="flex" justify="space-between" align="middle">
            <i-col :span="6">
                <span>进班起止时间:</span>
                <date-picker v-model="studentQueryConditions.inClassBeginAndEnd" split-panels type="datetimerange" format="yyyy-MM-dd HH:mm"
                             placeholder="进班时间的起止"></date-picker>
            </i-col>
            <i-col :span="6">
                <span>是否缴费:</span>
                <radio-group v-model="studentQueryConditions.isPay">
                    <radio label="是">
                        <span>是</span>
                    </radio>
                    <radio label="否">
                        <span>否</span>
                    </radio>
                </radio-group>
            </i-col>
            <i-col :span="6">
                <span>是否有效:</span>
                <radio-group v-model="studentQueryConditions.isValid">
                    <radio label="是">
                        <span>是</span>
                    </radio>
                    <radio label="否">
                        <span>否</span>
                    </radio>
                </radio-group>
            </i-col>
            <i-col :span="6">
                <span>是否回访:</span>
                <radio-group v-model="studentQueryConditions.isReturnVist">
                    <radio label="是">
                        <span>是</span>
                    </radio>
                    <radio label="否">
                        <span>否</span>
                    </radio>
                </radio-group>
            </i-col>
        </row>
        <row style="margin-top: 10px;" type="flex" justify="space-around" align="middle">
            <i-col :span="3" permissionerequier="student:addStudent">
                <button @click="addStudentModalShow"  class="button button-small button-3d button-primary button-rounded">
                    <Icon type="plus-round"></Icon>
                    新增学生
                </button>
            </i-col>
            <i-col :span="3">
                <button @click="studentShowColumnModal=true"   class="button button-small button-3d button-primary  button-rounded">
                    <Icon type="happy-outline"></Icon>
                    设置显示信息
                </button>
            </i-col>
            <i-col :span="3" >
                <button permissionerequier="student:getTemplate" @click="templateShow"  class="button button-small  button-3d button-royal button-rounded button-pill ">
                    下载模板
                </button>
            </i-col>
            <i-col :span="3">
                <upload :show-upload-list="false" action="/student/importStudent" :on-success="importsuc" :on-error="importerr">
                    <button  class="button button-small button-jumbo  button-3d button-pill">
                        <Icon type="android-download"></Icon>
                        导入学生
                    </button>
                </upload>
            </i-col>
            <i-col :span="3">
                <button  permissionerequier="student:expertStudent" @click="expertData"  class="button button-small button-3d button-primary  button-rounded">
                    <Icon type="paper-airplane"></Icon>
                    导出表格
                </button>
            </i-col>

            <i-col :span="3">
                <button permissionerequier="student:updateStudentAsker" @click="distributionAskers"  class="button button-small button-3d button-primary  button-rounded">
                    <Icon type="paper-airplane"></Icon>
                    分配咨询师
                </button>
            </i-col>
        </row>
    </div>
    <div style="margin-top: 20px;">
        <i-table  permissionerequier="student:queryStudent" @on-selection-change="changeSelectMethod" ref="studentTable" :height="tableHeight"  stripe  stripe  :loading="studentTableLoading" :columns="studentColumns" :data="studentData"></i-table>
    </div>
    <div style="display: flex;justify-content: center;align-items: center;margin-top: 20px;">
        <page :total="studentQueryConditions.total" @on-change="changePage" @on-page-size-change="changeSize" :current="studentQueryConditions.page"
              :page-size="studentQueryConditions.rows" show-elevator show-sizer></page>
    </div>
    <div style="display: none">
        <modal v-model="addStudentModel" title="新增学生">
            <i-form style="" :label-width="100" :model="addStudentForm"  label-position="right"  ref="addStudentRef">
                <form-item  label="学生姓名:"  required>
                    <i-input type="text"  v-model="addStudentForm.name"  placeholder="请输入学生姓名">
                    </i-input>
                </form-item>
                <form-item  label="学生性别:">
                    <radio-group v-model="addStudentForm.sex">
                        <radio label="男">
                            <span>男</span>
                        </radio>
                        <radio label="女">
                            <span>女</span>
                        </radio>
                        <radio label="未知">
                            <span>未知</span>
                        </radio>
                    </radio-group>
                </form-item>
                <form-item  label="学生年龄:">
                    <input-number :max="100" :min="1" v-model="addStudentForm.age" placeholder="请输入学生年龄"> </input-number>
                </form-item>
                <form-item  label="学生电话:">
                    <i-input type="text"  v-model="addStudentForm.phone"  placeholder="请输入学生电话">
                    </i-input>
                </form-item>
                <form-item  label="学生学历:">
                    <i-input type="text"  v-model="addStudentForm.stuStatus"  placeholder="请输入学生学历">
                    </i-input>
                </form-item>
                <form-item  label="学生状态:">
                    <i-input type="text"  v-model="addStudentForm.perState"  placeholder="请输入学生状态">
                    </i-input>
                </form-item>
                <form-item  label="学生来源渠道:">
                    <i-input type="text"  v-model="addStudentForm.msgSource"  placeholder="请输入学生来源渠道">
                    </i-input>
                </form-item>
                <form-item  label="学生来源网站:">
                    <i-input type="text"  v-model="addStudentForm.sourceUrl"  placeholder="请输入学生来源网站">
                    </i-input>
                </form-item>
                <form-item  label="学生来源关键词:">
                    <i-input type="text"  v-model="addStudentForm.sourceKeyWord"  placeholder="请输入学生来源关键词">
                    </i-input>
                </form-item>
                <form-item  label="学生qq:">
                    <i-input type="text"  v-model="addStudentForm.qq"  placeholder="请输入学生qq">
                    </i-input>
                </form-item>
                <form-item  label="学生微信:">
                    <i-input type="text"  v-model="addStudentForm.weiXin"  placeholder="请输入学生微信">
                    </i-input>
                </form-item>
                <form-item  label="是否报备:">
                    <i-input type="text"  v-model="addStudentForm.isBaoBei"  placeholder="请输入是否报备">
                    </i-input>
                </form-item>
                <form-item  label="备注:">
                    <i-input type="text"  v-model="addStudentForm.content"  placeholder="请输入备注">
                    </i-input>
                </form-item>
            </i-form>
            <div slot="footer" style="display: flex;justify-content: center;align-items: center;">
                <i-button type="success" size="large" @click="addStudentMethod">录入</i-button>
                <i-button type="warning" size="large" @click="addStudentModel=false">取消</i-button>
            </div>
        </modal>
        <modal v-model="studentShowColumnModal" title="设置需要显示的列"  @on-ok="changeShowStudenColumnMethon">
            <i-button type="info" @click="StudentShowColumncheckMethod" style="margin-bottom: 20px;">
                {{studentShowColumnCheckAndNoCheck}}
            </i-button>
            <checkbox-group v-model="studentShowColumn">
                <div v-for="(item,i) in studentColumnsAll"  :key="i">
                    <checkbox  :label="item.key" v-if="item.key!=null">
                        {{item.title}}
                    </checkbox>
                </div>
            </checkbox-group>
        </modal>
        <modal v-model="distributionAskersModal" title="分配咨询师">
            <i-select not-found-text="今天没有签到的咨询师" v-model="distributionAskersId" placeholder="">
                <i-option v-for="(option, index) in askersAllCheck" v-model="option.value" :key="index">
                    {{option.label}}
                </i-option>
            </i-select>
            <div slot="footer" style="display: flex;justify-content: center;align-items: center;">
                <i-button type="success" size="large" @click="distributionAskersMethod">分配</i-button>
                <i-button type="warning" size="large" @click="distributionAskersModal=false">取消</i-button>
            </div>
        </modal>
        <modal v-model="studentInfoModal" :title="studentSetModalTile">
            <row type="flex" justify="space-around" align="top">
                <i-col :span="12">
                    <h3>在线录入</h3>
                    <i-form label-position="right" :label-width="100">
                        <form-item label="姓名:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.name"></i-input>
                        </form-item>
                        <form-item label="性别:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.sex"></i-input>
                        </form-item>
                        <form-item label="年龄:">
                            <input-number :readonly="isStudentUpdate"  :max="100" :min="1"  v-model="activeStudentData.age"></input-number>
                        </form-item>
                        <form-item label="电话:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.phone"></i-input>
                        </form-item>
                        <form-item label="学历:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.stuStatus"></i-input>
                        </form-item>
                        <form-item label="状态:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.perState"></i-input>
                        </form-item>
                        <form-item label="来源渠道:">
                            <i-input readonly v-model="activeStudentData.msgSource"></i-input>
                        </form-item>
                        <form-item label="来源网址:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.sourceUrl"></i-input>
                        </form-item>
                        <form-item label="来源关键词:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.sourceKeyWord"></i-input>
                        </form-item>
                        <form-item label="所在区域:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.address"></i-input>
                        </form-item>
                        <form-item label="学员关注:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.stuConcern"></i-input>
                        </form-item>
                        <form-item label="来源部门:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.fromPart"></i-input>
                        </form-item>
                        <form-item label="学员QQ:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.qq"></i-input>
                        </form-item>
                        <form-item label="学员微信:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.weiXin"></i-input>
                        </form-item>
                        <form-item label="是否报备:">
                            <radio-group v-model="activeStudentData.isBaoBei">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="咨询师:">
                            <i-select :disabled="isStudentUpdate" v-model="activeStudentData.askerId" placeholder="请选择要查询的咨询师">
                                <i-option v-for="(option, index) in askersAll" v-model="option.value" :key="index">
                                    {{option.label}}
                                </i-option>
                            </i-select>
                        </form-item>
                        <form-item label="录入人姓名:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.createUser"></i-input>
                        </form-item>
                    </i-form>
                </i-col>
                <i-col :span="12">
                    <h3>咨询师录入</h3>
                    <i-form label-position="right" :label-width="100">
                        <form-item label="姓名(咨询):">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.ziXunName"></i-input>
                        </form-item>
                        <form-item label="课程方向:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.learnForward"></i-input>
                        </form-item>
                        <form-item label="打分:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.record"></i-input>
                        </form-item>
                        <form-item label="是否有效:">
                            <radio-group v-model="activeStudentData.isValid">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="无效原因:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.lostValid"></i-input>
                        </form-item>
                        <form-item label="是否回访:">
                            <radio-group v-model="activeStudentData.isReturnVist">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="首次回访时间:">
                            <date-picker :readonly="isStudentUpdate" v-model="activeStudentData.firstVisitTime" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                        </form-item>
                        <form-item label="是否上门:">
                            <radio-group v-model="activeStudentData.isHome">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="上门时间:">
                            <date-picker :readonly="isStudentUpdate" v-model="activeStudentData.homeTime" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                        </form-item>
                        <form-item label="预付定金:">
                            <input-number :readonly="isStudentUpdate"  :max="100000" :min="1"  v-model="activeStudentData.preMoney"></input-number>
                        </form-item>
                        <form-item label="预付定金时间:">
                            <date-picker :readonly="isStudentUpdate" v-model="activeStudentData.preMoneyTime" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                        </form-item>
                        <form-item label="是否付款:">
                            <radio-group v-model="activeStudentData.isPay">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="付款时间:">
                            <date-picker :readonly="isStudentUpdate" v-model="activeStudentData.payTime" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                        </form-item>
                        <form-item label="付款金额:">
                            <input-number :readonly="isStudentUpdate"  :max="100000" :min="1"  v-model="activeStudentData.money"></input-number>
                        </form-item>
                        <form-item label="是否退费:">
                            <radio-group v-model="activeStudentData.isReturnMoney">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="退费原因:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.returnMoneyReason"></i-input>
                        </form-item>
                        <form-item label="是否进班:">
                            <radio-group v-model="activeStudentData.isInClass">
                                <radio label="是" :disabled="isStudentUpdate" >
                                    <span>是</span>
                                </radio>
                                <radio label="否" :disabled="isStudentUpdate" >
                                    <span>否</span>
                                </radio>
                            </radio-group>
                        </form-item>
                        <form-item label="进班时间:">
                            <date-picker :readonly="isStudentUpdate" v-model="activeStudentData.inClassTime" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                        </form-item>
                        <form-item label="进班备注:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.inClassContent"></i-input>
                        </form-item>
                        <form-item label="咨询师备注:">
                            <i-input :readonly="isStudentUpdate" v-model="activeStudentData.askerContent"></i-input>
                        </form-item>

                    </i-form>
                </i-col>
            </row>
            <div slot="footer" v-if="!isStudentUpdate" style="display: flex;justify-content: center;align-items: center;">
                <i-button type="success" size="large" @click="updateStudent">修改</i-button>
                <i-button type="warning" size="large" @click="studentInfoModal=false">取消</i-button>
            </div>
        </modal>
        <modal v-model="netfollowsModal" title="跟踪学生">
            <i-form :rules="netfollowsRules" :label-width="100" :model="netfollowsForm"  label-position="right"  ref="netfollowsRef">
                <form-item  label="跟踪时间:"  prop="followTime">
                    <date-picker v-model="netfollowsForm.followTime" placeholder="请选择跟踪时间" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                </form-item>
                <form-item  label="跟踪类型:">
                    <i-input  v-model="netfollowsForm.followType"></i-input>
                </form-item>
                <form-item  label="跟踪状态:"  >
                    <i-input  v-model="netfollowsForm.followState"></i-input>
                </form-item>
                <form-item  label="下次跟踪时间:"  >
                    <date-picker v-model="netfollowsForm.nextFollowTime" placeholder="请选择下次跟踪时间" split-panels type="datetime" format="yyyy-MM-dd HH:mm:ss"></date-picker>
                </form-item>
                <form-item  label="备注:"  >
                    <i-input  v-model="netfollowsForm.content"></i-input>
                </form-item>
            </i-form>
            <div slot="footer" style="display: flex;justify-content: center;align-items: center;">
                <i-button type="success" size="large" @click="addNetfollowMethod">跟踪</i-button>
                <i-button type="warning" size="large" @click="netfollowsModal=false">取消</i-button>
            </div>
        </modal>
        <modal v-model="netfollowsQueryModal" title="日志信息">
            <div>
                <i-table    stripe  stripe   :columns="netfollowsColumns" :data="netfollowsData"></i-table>
            </div>
            <div style="display: flex;justify-content: center;align-items: center;margin-top: 20px;">
                <page @on-change="changeNetfollowsPage" :total="netfollowsTotal":current="netfollowsPage"
                      :page-size="netfollowsRows" show-elevator ></page>
            </div>
        </modal>
    </div>
</div>
</body>
<script>
    let maindata={
        data(){



            return{
                TemplateColumnCheck:[],
                showTemplateColumn:[],
                showTemplateMadal:false,
                isNetpusher:true,
                isAskerSelect:true,
                dynamicmessageContext:'',
                netfollowsData:[],
                netfollowsColumns:[
                    {
                        title:'学生名称',
                        key:'studentName',
                    },
                    {
                        title:'跟踪时间',
                        key:'followTime',
                    },
                    {
                        title:'内容',
                        key:'content',
                        ellipsis:true
                    },
                    {
                        title:"下次跟踪时间",
                        key:'nextFollowTime'
                    },
                    {
                        title:"操作",
                        render:(h, params)=>{
                            return h('i-button',{
                                on:{
                                    click:()=>{

                                        this.$Modal.confirm({
                                            render: (h) => {
                                                return h('div',params.row.content)
                                            }
                                        })

                                    }
                                }
                            },'查看内容')
                        }
                    }
                ],
                netfollowsQueryModal:false,
                netfollowsPage:1,
                netfollowsTotal:1,
                netfollowsRows:10,
                netfollowsRules:{
                    followTime:[
                        { required: true, type: 'date', message: '必须选择跟踪时间', trigger: 'change' }
                    ]
                },
                netfollowsForm:{
                    studentId:'',//跟踪学生id
                    studentName:'',//跟踪学生名称
                    followTime:'',//跟踪时间
                    followState:'',//跟踪状态
                    followType:'',//跟踪类型
                    nextFollowTime:'',//下次跟踪时间
                    content:''//备注
                },
                netfollowsModal:false,
                isStudentUpdate:true,
                studentSetModalTile:'',
                studentInfoModal:false,//学生详细信息框
                activeStudentData:{},//当前选择的数据,
                distributionAskersId:'',
                distributionAskersModal:false,
                studentTableCheck:[],
                studentShowColumnCheckAndNoCheck:'全选',
                studentShowColumn:[],
                studentShowColumnModal:false,
                addStudentForm:{
                    name:'',//学生姓名
                    sex:'',//学生性别
                    age:20,//学生年龄
                    phone:'',//学生电话
                    stuStatus:'',//学生学历
                    perState:'',//学生状态
                    msgSource:'',//学生来源渠道
                    sourceUrl:'',//学生来源网站
                    sourceKeyWord:'',//学生来源关键词
                    qq:'',//学生qq
                    weiXin:'',//学生微信
                    isBaoBei:'',//是否报备
                    content:'',//备注

                },
                addStudentModel:false,//新增学生模态框
                studentQueryConditions:{
                    isReturnVist:'',
                    isValid:'',
                    isPay:'',
                    inClassStart:'',
                    inClassEnd:'',
                    inClassBeginAndEnd:'',
                    payStart:'',
                    payEnd:'',
                    payStartBeginAndEnd:'',
                    returnVistEnd:'',
                    returnVistStart:'',
                    returnVistBeginAndEnd:'',
                    homeEnd:'',
                    homeStart:'',
                    homeBeginAndEnd:'',
                    createStart:'',
                    createEnd:'',
                    CreateBeginAndEnd:'',//学生创建时间
                    topSerch:false,//是否高级搜索
                    name:'',
                    phone:'',
                    netPusherId:'',
                    askerId:'',
                    qq:'',
                    page:1,
                    rows:10,
                    total:0
                },
                studentTableLoading:true,
                askersAll:[],
                studentData:[],
                studentColumns:[
                    {
                        type: 'selection',
                        width: 60,
                        align: 'center',
                        fixed: "left",
                    },
                    {
                        title:'学员姓名',
                        key:'name',
                        fixed: "left",
                        width: 100
                    },
                    {
                        title:'操作',
                        fixed: "right",
                        width: 100,
                        render: (h, params) => {
                            return h('div',{class:'show-student-button'}, [
                                h('i-button', {
                                    props: {

                                    },
                                    on:{
                                        click:()=>{
                                            this.studentSetModalTile="学生详细信息"
                                            this.activeStudentData=JSON.parse(JSON.stringify(params.row));
                                            this.studentInfoModal=true;
                                            this.isStudentUpdate=true;

                                        }
                                    }
                                },'查看'),
                                h('i-button', {
                                    props: {

                                    },
                                    attrs:{
                                        permissionerequier:'student:updateStudent'
                                    },
                                    on:{
                                        click:()=>{
                                            this.studentSetModalTile="修改学生详细信息"
                                            this.activeStudentData=JSON.parse(JSON.stringify(params.row));
                                            this.studentInfoModal=true;
                                            this.isStudentUpdate=false;

                                        }
                                    }
                                },'修改'),
                                h('i-button', {
                                    props: {

                                    },
                                    attrs:{
                                        permissionerequier:'netfollow:addNetFollow'
                                    },
                                    on:{
                                        click:()=>{
                                            for(let row in this.netfollowsForm){
                                                this.netfollowsForm[row]=''
                                            }

                                            this.netfollowsForm.studentId=params.row.id;
                                            this.netfollowsForm.studentName=params.row.name;
                                            this.netfollowsModal=true;
                                        }
                                    }
                                },'跟踪'),
                                h('i-button', {
                                    props: {
                                        type:'error'
                                    },
                                    attrs:{
                                        permissionerequier:'student:deleteStudentById'
                                    },
                                    on:{
                                        click:()=>{
                                            this.$Modal.confirm({
                                                onOk:()=>{
                                                    let id=params.row.id;
                                                    axios.delete('/student/deleteStudentById/'+id)
                                                        .then((response)=>{
                                                            if(response.data.success){
                                                                this.$Notice.success({
                                                                    title: '删除成功',
                                                                    desc:  ''
                                                                });
                                                                this.queryStudentPaging();
                                                            }else{


                                                            }
                                                        })
                                                        .catch((error)=>{
                                                            try {
                                                                if(error.response.data.success==false){
                                                                    if(error.response.data.message=="请先登录"){
                                                                        window.top.location.href="/";
                                                                    }
                                                                    this.$Notice.error({
                                                                        title: '删除失败',
                                                                        desc:  error.response.data.message
                                                                    });
                                                                }
                                                            }
                                                            catch(err) {
                                                                this.$Notice.error({
                                                                    title: '删除失败',
                                                                    desc:  ''
                                                                });
                                                            }
                                                        })
                                                },
                                                render: (h) => {
                                                    return h('h1', {
                                                        style:{
                                                            textAlign:'center'
                                                        }
                                                    },'!是否要删除学生')
                                                }
                                            })
                                        }
                                    }
                                },'删除'),
                                h('i-button',{
                                    props:{
                                        type:'info'
                                    },
                                    attrs:{
                                        permissionerequier:'netfollow:queryNetFollowByStudentIdPaging'
                                    },
                                    on:{
                                        click:()=>{
                                            this.netfollowsQueryModal=true;
                                            this.activeStudentData=JSON.parse(JSON.stringify(params.row));
                                            this.queryNetfollowsPaging();

                                        }
                                    }
                                },'日志'),
                                h('i-button',{
                                    props:{
                                        type:'warning'
                                    },
                                    attrs:{
                                        permissionerequier:'dynamicmessage:addDynamicmessage'
                                    },
                                    on:{
                                        click:()=>{
                                            this.dynamicmessageContext='';
                                            this.$Modal.confirm({
                                                render: (h) => {
                                                    return h('Input', {
                                                        props: {
                                                            value: this.dynamicmessageContext,
                                                            placeholder: '请输入内容'
                                                        },
                                                        on: {
                                                            input: (val) => {
                                                                this.dynamicmessageContext = val;
                                                            }
                                                        }
                                                    })
                                                },
                                                title:'新增动态信息',
                                                onOk:()=>{
                                                    axios.post('/dynamicmessage/addDynamicmessage',{
                                                        studentId:params.row.id,
                                                        studentName:params.row.name,
                                                        messageContent:this.dynamicmessageContext
                                                    })
                                                        .then((response) => {
                                                            if(response.data.success){
                                                                this.$Notice.success({
                                                                    title: '添加成功',
                                                                    desc:  ''
                                                                });
                                                            }else{
                                                                this.$Notice.error({
                                                                    title: '添加失败',
                                                                    desc:  ''
                                                                });
                                                            }

                                                        })
                                                        .catch((error)=>{
                                                            try {
                                                                if(error.response.data.message=="请先登录"){
                                                                    window.top.location.href="/";
                                                                }
                                                                if(error.response.data.success==false){
                                                                    this.$Notice.error({
                                                                        title: '添加失败',
                                                                        desc:  error.response.data.message
                                                                    });
                                                                }else{
                                                                    this.$Notice.error({
                                                                        title: '添加失败',
                                                                        desc:  ''
                                                                    });
                                                                }
                                                            }
                                                            catch(err) {
                                                                this.$Notice.error({
                                                                    title: '添加失败',
                                                                    desc:  ''
                                                                });
                                                            }
                                                            console.log(error)
                                                        })
                                                }
                                            })
                                        }
                                    }
                                },'添加动态')
                            ]);
                        }
                    },
                    {
                        title:'年龄',
                        key:'age',
                        width: 150,
                    },
                    {
                        title:'性别',
                        key:'sex',
                        width: 150,
                    },
                    {
                        title:'学员电话',
                        key:'phone',
                        width: 150,
                    },
                    {
                        title:'学历',
                        key:'stuStatus',
                        width: 150,
                    },
                    {
                        title:'个人状态',
                        key:'perState',
                        width: 150,
                    },
                    {
                        title:'来源渠道',
                        key:'msgSource',
                        width: 150,
                    },
                    {
                        title:'来源网址',
                        key:'sourceUrl',
                        width: 150,
                    },
                    {
                        title:'来源关键词',
                        key:'sourceKeyWord',
                        width: 150,
                    },
                    {
                        title:'所在区域',
                        key:'address',
                        width: 150,
                    },
                    {
                        title:'咨询师',
                        key:'askerName',
                        width: 150,
                    },
                    {
                        title:'学员QQ',
                        key:'qq',
                        width: 150,
                    },
                    {
                        title:'学员微信',
                        key:'weiXin',
                        width: 150,
                    },
                    {
                        title:'备注',
                        key:'content',
                        width: 150,
                    },
                    {
                        title:'创建时间',
                        key:'createTime',
                        width: 150,
                    },
                    {
                        title:'课程方向',
                        key:'learnForward',
                        width: 150,
                    },
                    {
                        title:'是否有效',
                        key:'isValid',
                        width: 150,
                    },
                    {
                        title:'打分',
                        key:'record',
                        width: 150,
                    },
                    {
                        title:'是否回访',
                        key:'isReturnVist',
                        width: 150,
                    },
                    {
                        title:'首次回访时间',
                        key:'firstVisitTime',
                        width: 150,
                    },
                    {
                        title:'是否上门',
                        key:'isHome',
                        width: 150,
                    },
                    {
                        title:'上门时间',
                        key:'homeTime',
                        width: 150,
                    },
                    {
                        title:'无效原因',
                        key:'lostValid',
                        width: 150,
                    },
                    {
                        title:'是否付款',
                        key:'isPay',
                        width: 150,
                    },
                    {
                        title:'付款时间',
                        key:'payTime',
                        width: 150,
                    },
                    {
                        title:'付款金额',
                        key:'money',
                        width: 150,
                    },
                    {
                        title:'是否退费',
                        key:'isReturnMoney',
                        width: 150,
                    },
                    {
                        title:'是否进班',
                        key:'isInClass',
                        width: 150,
                    },
                    {
                        title:'进班时间',
                        key:'inClassTime',
                        width: 150,
                    },
                    {
                        title:'进班备注',
                        key:'inClassContent',
                        width: 150,
                    },
                    {
                        title:'咨询师备注',
                        key:'askerContent',
                        width: 150,
                    },
                    {
                        title:'是否删除',
                        key:'isDel',
                        width: 150,
                    },
                    {
                        title:'来源部门',
                        key:'fromPart',
                        width: 150,
                    },
                    {
                        title:'学员关注',
                        key:'stuConcern',
                        width: 150,
                    },
                    {
                        title:'是否报备',
                        key:'isBaoBei',
                        width: 150,
                    },
                    {
                        title:'咨询师填写的姓名',
                        key:'ziXunName',
                        width: 150,
                    },
                    {
                        title:'录入人姓名',
                        key:'createUser',
                        width: 150,
                    },
                    {
                        title:'退费原因',
                        key:'returnMoneyReason',
                        width: 150,
                    },
                    {
                        title:'预付定金',
                        key:'preMoney',
                        width: 150,
                    },
                    {
                        title:'预付定金时间',
                        key:'preMoneyTime',
                        width: 150,
                    }
                ],
                studentColumnsAll:[],
                tableHeight:1000,
            }
        },
        watch:{
            'studentQueryConditions.CreateBeginAndEnd':{
                handler: function (val, oldVal) {
                    this.studentQueryConditions.createStart=this.date_string(val[0])
                    this.studentQueryConditions.createEnd=this.date_string(val[1])
                },
                deep: true
            },
            'studentQueryConditions.homeBeginAndEnd':{
                handler: function (val, oldVal) {
                    this.studentQueryConditions.homeStart=this.date_string(val[0])
                    this.studentQueryConditions.homeEnd=this.date_string(val[1])
                },
                deep: true
            },
            'studentQueryConditions.returnVistBeginAndEnd':{
                handler: function (val, oldVal) {
                    this.studentQueryConditions.returnVistStart=this.date_string(val[0])
                    this.studentQueryConditions.returnVistEnd=this.date_string(val[1])
                },
                deep: true
            },
            'studentQueryConditions.payStartBeginAndEnd':{
                handler: function (val, oldVal) {
                    this.studentQueryConditions.payStart=this.date_string(val[0])
                    this.studentQueryConditions.payEnd=this.date_string(val[1])
                },
                deep: true
            },
            'studentQueryConditions.inClassBeginAndEnd':{
                handler: function (val, oldVal) {
                    this.studentQueryConditions.inClassStart=this.date_string(val[0])
                    this.studentQueryConditions.inClassEnd=this.date_string(val[1])
                },
                deep: true
            }
        },
        methods:{

            //下载模板
            downTemplate(){
                if(this.TemplateColumnCheck.length==0||this.TemplateColumnCheck==null){
                    this.$Message.error("未选择需要导入的列");
                    return
                }
                const form = document.createElement('form')
                form.action = "/student/expertTemplate"
                form.method = 'GET'
                const names=document.createElement("input");
                names.name="names"
                names.value = this.TemplateColumnCheck;
                form.style.display = 'none'
                form.appendChild(names);
                document.body.appendChild(form)
                form.submit()
                document.body.removeChild(form)
                this.showTemplateMadal=false;
            },
            //打开模板模态框
            templateShow(){
                axios.get('/student/getTemplate')
                    .then((response)=>{
                        this.showTemplateColumn=response.data;
                        this.TemplateColumnCheck=response.data.filter(row=>{
                            return row.noNull
                        })
                        this.TemplateColumnCheck=this.TemplateColumnCheck.map(row=>{
                            return row.name;
                        })
                        console.log(this.TemplateColumnCheck)
                        this.showTemplateMadal=true;
                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.success==false){
                                console.log(error.response.data.message)
                                if(error.response.data.message=="请先登录"){
                                    //  window.top.location.href="/";
                                }
                                this.$Notice.error({
                                    title: '查询失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '查询失败',
                                desc:  ''
                            });
                        }
                    })
            },
            importsuc(response, file, fileList){
                if(response.success){
                    this.$Message.success("成功");
                }else{
                    this.$Message.error(response.message);
                }

            },
            importerr(error, file, fileList){
                this.$Message.error(error.message);
            },
            queryStudentPagingSearch(){
                this.studentQueryConditions.page=1;
                this.queryStudentPaging();
            },
            changeNetfollowsPage(page){
                this.netfollowsPage=page;
                this.queryNetfollowsPaging();
            },
            queryNetfollowsPaging(){
                // this.netfollowsData
                axios.get('/netfollow/queryNetFollowByStudentIdPaging/'+this.activeStudentData.id,{
                    params:{
                        page:this.netfollowsPage,
                        rows:this.netfollowsRows
                    }
                })
                    .then((response)=>{
                        if(response.data.success){
                            this.netfollowsData=response.data.message.rows;
                            this.netfollowsTotal=response.data.message.total;
                        }else{


                        }
                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.success==false){
                                if(error.response.data.message=="请先登录"){
                                    window.top.location.href="/";
                                }
                                this.$Notice.error({
                                    title: '查询失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '查询失败',
                                desc:  ''
                            });
                        }
                    })
            },
            //新增跟踪学生
            addNetfollowMethod(){
                this.$refs['netfollowsRef'].validate((valid) => {
                    if (valid) {
                        let params=new URLSearchParams();
                        for(let item in this.netfollowsForm){
                            if('object'==typeof (this.netfollowsForm[item])){
                                let dateStr=this.date_string(this.netfollowsForm[item]);
                                if(dateStr!=null && dateStr!='')
                                    params.append(item,dateStr);
                            }
                            else{
                                if(this.netfollowsForm[item]!=null && this.netfollowsForm[item]!='')
                                    params.append(item,this.netfollowsForm[item]);
                            }
                        }
                        axios.post('/netfollow/addNetFollow',params)
                            .then((response) => {
                                if(response.data.success){
                                    this.$Notice.success({
                                        title: '跟踪成功',
                                        desc:  ''
                                    });
                                    this.netfollowsModal=false;
                                }else{
                                    this.$Notice.error({
                                        title: '跟踪失败',
                                        desc:  response.data.message
                                    });
                                }

                            })
                            .catch((error)=>{
                                try {
                                    if(error.response.data.message=="请先登录"){
                                        window.top.location.href="/";
                                    }
                                    if(error.response.data.success==false){
                                        this.$Notice.error({
                                            title: '跟踪失败',
                                            desc:  error.response.data.message
                                        });
                                    }
                                }
                                catch(err) {
                                    this.$Notice.error({
                                        title: '跟踪失败',
                                        desc:  ''
                                    });
                                }
                                console.log(error)
                            })
                    } else {
                        this.$Message.error('字段错误!');
                    }
                })



            },
            updateStudent(){//修改学生信息
                let params=new URLSearchParams();
                for(let item in this.activeStudentData){
                    if('object'==typeof (this.activeStudentData[item])){
                        let dateStr=this.date_string(this.activeStudentData[item]);
                        if(dateStr!=null && dateStr!='')
                            params.append(item,dateStr);
                    }
                    else
                        params.append(item,this.activeStudentData[item]);
                }
                axios.put('/student/updateStudent',params)
                    .then((response) => {
                        if(response.data.success){
                            this.$Notice.success({
                                title: '修改成功',
                                desc:  ''
                            });
                            this.studentInfoModal=false;
                            this.queryStudentPaging();
                        }else{
                            this.$Notice.error({
                                title: '修改失败',
                                desc:  ''
                            });
                        }

                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.message=="请先登录"){
                                window.top.location.href="/";
                            }
                            if(error.response.data.success==false){
                                this.$Notice.error({
                                    title: '修改失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '修改失败',
                                desc:  ''
                            });
                        }
                        console.log(error)
                    })
            },
            distributionAskersMethod(){
                if(this.distributionAskersId==""){
                    this.$Notice.error({
                        title: '修改失败',
                        desc:   '请选择一个咨询师'
                    });
                }
                let studentAskerStudentIdData=this.studentTableCheck.map(row=>{
                    return row.id;
                })
                let params=new URLSearchParams();
                params.append("studentIds",studentAskerStudentIdData)
                params.append("askerId",this.distributionAskersId)
                axios.put('/student/updateStudentAsker',params)
                    .then((response) => {
                        if(response.data.success){
                            this.$Notice.success({
                                title: '修改成功',
                                desc:  ''
                            });
                            this.distributionAskersModal=false;
                            this.queryStudentPaging();
                        }else{
                            this.$Notice.error({
                                title: '修改失败',
                                desc:  ''
                            });
                        }

                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.message=="请先登录"){
                                window.top.location.href="/";
                            }
                            if(error.response.data.success==false){
                                this.$Notice.error({
                                    title: '新增失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '新增失败',
                                desc:  ''
                            });
                        }
                        console.log(error)
                    })

            },
            //给学生分配咨询师
            distributionAskers(){
                if(this.studentTableCheck.length<1){
                    this.$Notice.error({
                        title: '导出错误',
                        desc:  '请选中学生'
                    });
                    return;
                }
                this.distributionAskersModal=true;
            },
            //选中框时出发
            changeSelectMethod(selection){
                this.studentTableCheck=selection;
            },
            //导出表格
            expertData(){
                const form = document.createElement('form')
                form.action = "/student/expertStudent"
                form.method = 'GET'
                form.style.display = 'none'
                for(let key in this.studentQueryConditions){
                    let input = document.createElement('input')
                    input.name=key;
                    input.value=this.studentQueryConditions[key];
                    if(key=="rows")
                        input.value=0;
                    form.appendChild(input)
                }
                const button = document.createElement('input')
                button.type = 'submit'
                form.appendChild(button)
                document.body.appendChild(form)
                form.submit()
                document.body.removeChild(form)
            },
            //显示需要显示的信息时  全选全不选
            StudentShowColumncheckMethod(){
                if(this.studentShowColumnCheckAndNoCheck=="全选"){
                    this.studentShowColumn=this.studentColumnsAll.map(row=>{
                        return row.key
                    })
                    this.studentShowColumnCheckAndNoCheck="全不选"
                }else{
                    this.studentShowColumn=[];
                    this.studentShowColumnCheckAndNoCheck="全选"
                }
            },
            //选中需要的数据
            studentShowColumnChecked(){
                this.studentShowColumn=this.studentColumns.map(row=>{
                    return row.key
                })
            },
            //改变显示的列
            changeShowStudenColumnMethon(){
                let showColumn=this.studentShowColumn;
                this.studentColumns=this.studentColumnsAll.filter(row => {
                    if(row.key == null){
                        return true;
                    }
                    if(showColumn.indexOf(row.key)>=0){
                        return true;
                    }

                })
            },
            //新增学生方法
            addStudentMethod(){
                axios.post('/student/addStudent',this.addStudentForm)
                    .then((response) => {
                        if(response.data.success){
                            for(let key in this.addStudentForm){
                                if(key=='age')
                                    this.addStudentForm[key]=20
                                else
                                    this.addStudentForm[key]=''
                            }
                            this.$Notice.success({
                                title: '新增成功',
                                desc:  ''
                            });
                            this.addStudentModel=false;
                        }else{

                        }

                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.message=="请先登录"){
                                window.top.location.href="/";
                            }
                            if(error.response.data.success==false){
                                this.$Notice.error({
                                    title: '新增失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '新增失败',
                                desc:  ''
                            });
                        }
                        console.log(error)
                    })

            },
            //新增学生模态框显示
            addStudentModalShow(){
                this.addStudentModel=true;
            },
            //格式化时间
            date_string(date) {
                if (typeof(date) != "object" || date=="" ||date==null) {
                    return null;
                }
                let year = date.getFullYear();
                let month = (date.getMonth() + 1).toString();
                let day = (date.getDate()).toString();
                let hour = date.getHours();
                let min = date.getMinutes();
                let secod = date.getSeconds();
                if (month.length == 1) {
                    month = "0" + month;
                }
                if (day.length == 1) {
                    day = "0" + day;
                }
                var dateTime = year + "-" + month + "-" + day + " " + hour + ":" + min + ":" + secod
                return dateTime;
            },
            changePage(current){
                this.studentQueryConditions.page=current;
                this.queryStudentPaging();
            },
            changeSize(rows){
                this.studentQueryConditions.rows=rows;
                this.queryStudentPaging();
            },
            //分页查询学生
            queryStudentPaging(){
                window.setTimeout(()=>{
                    permissionshow();
                },100)
                this.studentTableLoading=true;
                axios.get("/student/queryStudentPaging",{
                    params:this.studentQueryConditions
                })
                    .then((response) => {
                        this.studentData=[];
                        this.studentQueryConditions.total=response.data.total;
                        let askerIds=response.data.rows.map(row=>{
                            return row.askerId;
                        })
                            this.studentData=response.data.rows;


                        this.studentTableLoading=false;
                        if(this.studentData.length>=10){
                            this.tableHeight=10*100;
                        }else{
                            this.tableHeight=this.studentData.length*(100+(40-((this.studentData.length-1)*4)));
                        }

                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.message=="请先登录"){
                                window.top.location.href="/";
                            }
                            if(error.response.data.success==false){
                                this.$Notice.error({
                                    title: '查询失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '查询失败',
                                desc:  ''
                            });
                        }                                               console.log(error)
                    })
            },
            //页面刷新
            reloadHTML() {
                //window.location.reload();
                this.$Spin.show();
                this.$Loading.start();
                setTimeout(() => {
                    this.$Spin.hide();
                    this.$Loading.finish();
                    window.location.reload();
                }, 1000);
            },
            //查询所有咨询师
            queryAskersAll(){

                axios.get('/asker/queryAskersAll')
                    .then((response) => {
                        let askersData=response.data;
                        this.askersAll=askersData.map(item => {
                            return {
                                value: item.askerId,
                                label: item.askerName,
                                checkState:item.checkState,
                                checkInTime:item.checkInTime,
                                changeState:item.changeState,
                                weight:item.weight,
                                roleName:item.roleName,
                                bakContent:item.bakContent
                            };
                        });

                    })
                    .catch((error)=>{
                        try {
                            if(error.response.data.message=="请先登录"){
                                window.top.location.href="/";
                            }
                            if(error.response.data.success==false){
                                this.$Notice.error({
                                    title: '查询失败',
                                    desc:  error.response.data.message
                                });
                            }
                        }
                        catch(err) {
                            this.$Notice.error({
                                title: '查询失败',
                                desc:  ''
                            });
                        }
                        console.log(error)
                    })
            }
        },
        computed:{
            askersAllCheck:function (){
                return  this.askersAll.filter(row=>{
                    let date=new Date(row.checkInTime);
                    if(row.checkState=="已签到"&&date.toDateString()==new Date().toDateString()){
                        return row;
                    }
                })
            }
        },
        mounted(){
            this.queryAskersAll();
            this.queryStudentPaging();
            this.studentShowColumnChecked();
            this.studentColumnsAll=this.studentColumns;
            let roleNames=localStorage.getItem("roleNames");
            if(roleNames.indexOf("咨询师")!=-1){
                this.studentQueryConditions.askerId=localStorage.getItem("userId");
                this.isAskerSelect=false;
            }
            if(roleNames.indexOf("网络咨询")!=-1){
                this.studentQueryConditions.netPusherId=localStorage.getItem("userId");
                this.isNetpusher=false;
            }
        }
    }
    var Component = Vue.extend(maindata)
    new Component().$mount('#app')
</script>
</html>